#进销存系统软件体系结构描述文档

## 1. 引言

### 1.1 编制目的

​	本报告详细完成对南京某灯具厂管理系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

​	本报告面向开发人员、测试人员及最终用户而编写，是理解系统的导航。

### 1.2 词汇表

|     词汇名称      |     词汇含义     |  备注  |
| :-----------: | :----------: | :--: |
| presentation  |     展示层      |      |
| businesslogic |    业务逻辑层     |      |
|     data      |     数据层      |      |
|      PO       | 持久化存储,是外存的抽象 |      |
|      VO       | 网络传输,是数据包的抽象 |      |

### 1.3 参考资料

## 2. 产品概述

参考之前的管理系统用例文档和需求规格说明文档中对产品的概括和描述。



## 3. 逻辑视角

本系统使用分层体系结构风格，系统被分为presentation，businesslogic，data三层，能够很好的概括高层抽象。presentation包含了GUI页面的实现，交互动作的实现。businesslogic层包含业务逻辑处理的实现，data层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图所示。

![参照体系结构风格的包图表达逻辑视角](..\img\参照体系结构风格的包图表达逻辑视角.png)

![体系结构逻辑设计方案](..\img\体系结构逻辑设计方案.png)

## 4. 组合视角

### 4.1 开发包图

灯具厂管理系统的最终开发包设计如表所示

| 开发（物理）包                       | 依赖的其他开发包                                 |
| ----------------------------- | :--------------------------------------- |
| mainui                        | categoryui,goodui,viewui,giftui,superviseui, clientui,importui,saleui,accountui,billui,initialAccountui,businessProcessui,   translationSituationui,saleSituationui,promotionui,approveui,userui,vo |
| categoryui                    | categoryblservice，界面类库包                  |
| categoryblservice             |                                          |
| categorybl                    | categoryblservice, categorydataservice, po |
| categorydataservice           | Java RMI, po                             |
| categorydata                  | databaseutility, po, categorydataservice |
| goodui                        | goodblservice，界面类库包                      |
| goodblservice                 |                                          |
| goodbl                        | goodblservice, gooddataservice, po, categorybl |
| gooddataservice               | Java RMI, po                             |
| gooddata                      | Java RMI, po, databaseutility            |
| viewui                        | viewblservice, 界面类库包                     |
| viewblservice                 |                                          |
| viewbl                        | viewblservice, viewdataservice, po, goodbl |
| viewdataservice               | Java RMI, po                             |
| viewdata                      | Java RMI, po, databaseutility            |
| giftui                        | giftblservice, 界面类库包                     |
| giftblservice                 |                                          |
| giftbl                        | giftblservice, giftdataservice, goodbl   |
| giftdataservice               | Java RMI, po                             |
| giftdata                      | Java RMI, po, databaseutility            |
| superviseui                   | superviseblservice, 界面类库包                |
| superviseblservice            |                                          |
| supervisebl                   | superviseblservice, supervisedataservice, goodbl |
| supervisedataservice          | Java RMI, po                             |
| supervisedata                 | Java RMI, po, databaseutility            |
| clientui                      |                                          |
| clientblservice               |                                          |
| clientbl                      |                                          |
| clientdataservice             |                                          |
| clientdata                    |                                          |
| importui                      |                                          |
| importblservice               |                                          |
| importbl                      |                                          |
| importdataservice             |                                          |
| importdata                    |                                          |
| saleui                        |                                          |
| saleblservice                 |                                          |
| salebl                        |                                          |
| saledataservice               |                                          |
| saledata                      |                                          |
| accountui                     | accountblservice,界面类库包,vo                |
| accountblservice              |                                          |
| accountbl                     | accountblservice,accountdataservice,po   |
| accountdataservice            | Java RMI,po                              |
| accountdata                   | databaseutility,po,accountdataservice    |
| billui                        | billblservice,界面类库包,vo                   |
| billblservice                 |                                          |
| billbl                        | billblservice,billdataservice,po,promotionbl |
| billdataservice               | Java RMI,po                              |
| billdata                      | databaseutility,po,billdataservice       |
| initialAccountui              | initialAccountblservice,界面类库包,vo         |
| initialAccountblservice       |                                          |
| initialAccountbl              | initialAccountblservice,initialAccountdataservice,po |
| initialAccountdataservice     | Java RMI,po                              |
| initialAccountdata            | databaseutility,po,initialAccountdataservice |
| businessProcessui             | businessProcessblservice,界面类库包           |
| businessProcessblservice      |                                          |
| businessProcessbl             | businessProcessblservice,supervisebl,salebl,billbl,importbl |
| translationSituationui        | translationSituationblservice,界面类库包      |
| translationSituationblservice |                                          |
| translationSituationbl        | translationSituationblservice,po         |
| saleSituationui               | saleSituationblservice,界面类库包             |
| saleSituationblservice        |                                          |
| saleSituationbl               | saleSituationblservice,po                |
| promotionui                   | promotionblservice,界面类库包                 |
| promotionblservice            |                                          |
| promotionbl                   | promotiondataservice                     |
| promotiondataservice          | Java RMI,po                              |
| promotiondata                 | databaseutility,po,promotiondataservice  |
| approveui                     | approveblservice,界面类库包                   |
| approveblservice              |                                          |
| approvebl                     | approveblservice,approvedataservice,po   |
| approvedataservice            | Java RMI,po                              |
| approvedata                   | databaseutility,po,approvedataservice    |
| userui                        |                                          |
| userblservice                 |                                          |
| userbl                        |                                          |
| userdataservice               |                                          |
| userdata                      |                                          |
| vo                            |                                          |
| po                            |                                          |
| utilitybl                     |                                          |
| 界面类库包                         |                                          |
| Java RMI                      |                                          |
| databaseutility               | JDBC                                     |

![进销存管理系统客户端开发包图](..\img\进销存管理系统客户端开发包图.png)

![进销存管理系统服务器端开发包图](..\img\进销存管理系统服务器端开发包图.png)

### 4.2 运行时进程

在进销存管理系统中，会有多个客户端进程和一个服务器端进程，其进程如图所示。结合部署图，客户端进程实在客户端机器上运行，服务器端进程在服务器端机器上运行。

![进程图](..\img\进程图.png)

### 4.3 物理部署

进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub构件。部署图如下

![部署图](..\img\部署图.png)

## 5. 接口视角

### 5.1模块的职责

客户端模块和服务器端模块视图如下所示。客户端各层和服务器端各层的职责如下表所示。

![客户端和服务器端模块视图](..\img\客户端和服务器端模块视图.png)

- 表 客户端各层的职责

|    层    |           职责           |
| :-----: | :--------------------: |
|  启动模块   |   负责初始化网络通信机制，启动用户界面   |
|  用户界面层  |        客户端用户界面         |
|  业务逻辑层  | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 客户端网络模块 |  利用Java RMI机制查找RMI服务   |

- 表 服务器端各层的职责

|    层     |             职责              |
| :------: | :-------------------------: |
|   启动模块   |     负责初始化网络通信机制，启动用户界面      |
|   数据层    |       负责数据的持久化及数据访问接口       |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层之间接口的调用如下表所示。

- 表 层之间调用的接口


|                    接口                    |  服务调用方   |  服务提供方   |
| :--------------------------------------: | :------: | :------: |
| CategoryBLService, GoodBLService, ViewBLService, GiftBLService, SuperviseBLService, ClientBLService, ImportBLService, SaleBLService, AccountBLService, BillBLService, InitialAccountBLService, BusinessProcessBLService, TranslationSituationBLService, SaleSituationBLService, PromotionBLService, ApproveBLService, UserBLService |  客户端展示层  | 客户端业务逻辑层 |
| CategoryDataService, GoodDataService, ViewDataService, GiftDataService, SuperviseDataService, ClientDataService, ImportDataService, SaleDataService, AccountDataService, BillDataService, InitialAccountDataService, BusinessProcessDataService, TranslationSituationDataService, SaleSituationDataService, PromotionDataService, ApproveDataService, UserDataService | 客户端业务逻辑层 | 服务器端数据层  |

（各自参照图9，画了命名成“XX用例层之间调用的接口”将图片保存成png格式存在SEhomework\doc\img下即可）

- 商品分类管理用例层之间调用的接口

  ![商品分类管理用例层之间调用的接口](..\img\商品分类管理用例层之间调用的接口.png)



- 商品管理用例层之间调用的接口

  ![商品管理用例层之间调用的接口](..\img\商品管理用例层之间调用的接口.png)

- 查看库存用例层之间调用的接口

  ![查看库存用例层之间调用的接口](..\img\查看库存用例层之间调用的接口.png)

- 库存赠送用例层之间调用的接口

  ![库存赠送用例层之间调用的接口](..\img\库存赠送用例层之间调用的接口.png)

- 库存监管用例曾之间调用的接口

  ![库存监管用例层之间调用的接口](..\img\库存监管用例层之间调用的接口.png)



- 账户管理用例层之间调用的接口


![账户管理用例层之间调用的接口](..\img\账户管理用例层之间调用的接口.png)


- 财务管理用例层之间调用的接口

  ![财务管理用例层之间调用的接口](..\img\财务管理用例层之间调用的接口.png)

- 期初建账用例层之间调用的接口


![期初建账用例层之间调用的接口](..\img\期初建账用例层之间调用的接口.png)


- 经营历程查询用例层之间调用的接口


![经营历程查询用例层之间调用的接口](..\img\经营历程查询用例层之间调用的接口.png)


- 经营情况查询用例层之间调用的接口

  ![经营情况查询用例层之间调用的接口](..\img\经营情况查询用例层之间调用的接口.png)

- 销售明细查询用例层之间调用的接口

  ![销售明细查询用例层之间调用的接口](..\img\销售明细查询用例层之间调用的接口.png)

- 销售策略用例层之间调用的接口

  ![销售策略用例层之间调用的接口](..\img\销售策略用例层之间调用的接口.png)



- 审批用例层之间调用的接口

  ![销售策略用例层之间调用的接口](..\img\审批用例层之间调用的接口.png)



- 系统管理用例层之间调用的接口


![系统管理用例层之间调用的接口](..\img\系统管理用例层之间调用的接口.png)


###5.2 用户界面层的分解

根据需求，系统存在 个用户界面：



服务器端和客户端的用户界面设计接口是一致的，只是具体的页面不一样。用户界面类如图所示。

![用户界面类](..\img\用户界面类.png)

####5.2.1 用户界面层模块的职责

如表 所示为用户界面层模块的职责。

- 表 用户界面层

|    模块     |          职责           |
| :-------: | :-------------------: |
| MainFrame | 界面Frame，负责界面的显示和界面的跳转 |

#### 5.2.2 用户界面层莫模块的接口规范

用户界面层模块的接口规范如下。

##### **MainFrame**

##### **语法:** init(args:String[])

##### **前置条件:** 无

##### **后置条件:** 显示Frame以及LoginPanel

用户界面层需要的服务接口如表 所示。

- 表 用户界面层模块需要的服务接口

| 服务名                                 | 服务                |
| :---------------------------------- | :---------------- |
| businesslogicservice.LoginBLService | 登陆界面的业务逻辑接口       |
| businesslogicservice.*BLService     | 每个界面都有一个相应的业务逻辑接口 |

#### 5.2.3 用户界面模块设计原理

用户界面利用Java的Swing和AWT库来实现

###5.3 业务逻辑层的分解 

业务逻辑层包括多个针对界面的业务逻辑处理对象。

![业务逻辑层的设计](..\img\业务逻辑层的设计.png)

#### 5.3.1 业务逻辑层模块的职责

业务逻辑层模块的职责如表所示

- 表 业务逻辑层模块的职责

|           模块           |          职责          |
| :--------------------: | :------------------: |
|       categorybl       |    负责实现商品界面所需要的服务    |
|         goodbl         |    负责实现商品界面所需要的服务    |
|         viewbl         |   负责实现库存查看界面所需要的服务   |
|         giftbl         |   负责实现赠送库存界面所需要的服务   |
|      supervisebl       |   负责实现库存监管界面所需要的服务   |
|        clientbl        |        客户信息管理        |
|        importbl        |     负责实现进货/退货的服务     |
|         salebl         | 负责实现销售/退货订单的制定所需要的服务 |
|       financebl        |    负责实现财务界面所需要的服务    |
| TranslationSituationbl |   负责实现经营情况界面所需要的服务   |
|     SaleSituation      |   负责实现销售明细界面所需要的服务   |
|      promotionbl       |  负责实现促销策略制定界面所需要的服务  |
|       approvebl        |   负责实现单据审批界面所需要的服务   |
|        systembl        |   负责实现系统管理界面所需要的拂去   |
|       accountbl        |   负责实现账户管理界面所需要的服务   |
|         billbl         |   负责实现财务管理界面所需要的服务   |
|    initialAccountbl    |   负责实现期初建账界面所需要的服务   |
|   businessProcessbl    |  负责实现经营历程查询界面所需要的服务  |
|         userbl         |   负责实现系统管理界面所需要的服务   |
#### 5.3.2 业务逻辑层模块的接口规范

##### categorybl模块的接口规范

**提供的服务<供接口>**

##### **1. category.addNew**

##### **语法:**public boolean addCategory(String category_name)

##### **前置条件:**原表中商品分类不存在

##### **后置条件:**显示添加商品分类成功或者失败

##### **2. category.delete**

##### **语法:**public boolean deleteCategory()

##### **前置条件:**存在要删除的商品分类

##### **后置条件:**显示删除商品分类成功或者失败

##### **3. category.rename**

##### **语法:**public boolean renameCategory(String categoryName)

##### **前置条件:**存在要重命名的商品分类，且新的商品分类名称原表中不存在

##### **后置条件:**显示修改商品分类名称成功或者失败

##### **4. category.list**

##### **语法:**public void listCategory(SearchType type)

##### **前置条件:**存在商品分类

##### **后置条件:**显示商品分类列表

**需要的服务<需接口>** 

|                   服务名                    |         服务          |
| :--------------------------------------: | :-----------------: |
|   DatabaseFacory.getInventoryDatabase    |    得到库存数据库服务的引用     |
| CategoryDataService.insert(CategoryPo po) | 在数据库中插入CategoryPo对象 |

##### goodbl模块的接口规范

**提供的服务<供接口>**

##### **1. Good.addNew**

##### **语法:**public boolean addGood(String goodName)

##### **前置条件:**原表中不存在该商品信息

##### **后置条件:**显示添加商品成功或者失败

##### **2.Good.delete **

##### **语法:**public boolean deleteGood()

##### **前置条件:**存在要删除的商品

##### **后置条件:**显示删除商品成功

##### **3.Good.rename **

##### **语法:**public boolean renameGood(String goodName)

##### **前置条件:**存在要重命名的商品

##### **后置条件:**显示修改商品名称成功

##### **4.Good.edit**

##### **语法:**public boolean editGood(EditMessage em)

##### **前置条件:存在要修改的商品信息**，且修改值合法

##### **后置条件:**显示修改商品信息成功

##### **5.Good.move  **

##### **语法:**public boolean moveGood()

##### **前置条件:**存在需要移动到别的分类的商品

##### **后置条件:**显示移动商品到指定商品分类成功

##### **6.Good.search **

##### **语法:**public List searchGood(SearchType type)

##### **前置条件:**启动一个商品搜索回合，且搜索的值合法

##### **后置条件:列表显示要查找的商品**

**需要的服务<需接口>** 

|                 服务名                 |       服务        |
| :---------------------------------: | :-------------: |
| DatabaseFacory.getInventoryDatabase |  得到库存数据库服务的引用   |
|  GoodDataService.inser(GoodPo po)   | 在数据库中插入GoodPo对象 |
|     CategoryDataService.list()      | 显示所有商品分类的持久化对象  |

##### viewbl模块的接口规范

**提供的服务<供接口>**

##### **1. View.period**

##### **语法:**public List search_by_period(Period period)

##### **前置条件:**启动一个根据时间查看商品的回合，且时间段合法

##### **后置条件:**列表显示符合时间条件的商品信息

##### **2. View.check**

##### **语法:**public List check(SearchType type)

##### **前置条件:**启动一个查看当天商品的回合，且搜索的值合法

##### **后置条件:**列表显示符合条件的商品信息

##### **3. View.ouput_Excel**

##### **语法:**public ResultMessage output_Excel(SearchType type)

##### **前置条件:**请求导出Excel

##### **后置条件:**导出Excel成功并保存

**需要的服务<需接口>** 

|                   服务名                   |          服务           |
| :-------------------------------------: | :-------------------: |
|   DatabaseFacory.getInventoryDatabase   |     得到库存数据库服务的引用      |
|    ViewDataService.insert(ViewPo po)    |    在数据库中插入ViewPo对象    |
| GoodDataService.search(SearchType type) | 根据SearchType查找多个持久化对象 |

##### giftbl模块的接口规范

**提供的服务<供接口>**

##### **1. Gift.recommend**

##### **语法:**public List gift_recommend()

##### **前置条件:**启动一个赠送库存的回合，且原表中存在商品信息

##### **后置条件:**列表显示价值在20-100元的商品

##### **2. Gift.choose**

##### **语法:**public List gift_choose(ChooseType type)

##### **前置条件:**某些商品被选中作为赠品

##### **后置条件:**列表显示选中的商品信息

##### **3. Gift.commit**

##### **语法:**public ResultMessage gift_commit()

##### **前置条件:**提交赠品信息

##### **后置条件:**单据通过，系统打印单据

**需要的服务<需接口>** 

|                   服务名                   |          服务           |
| :-------------------------------------: | :-------------------: |
|   DatabaseFacory.getInventoryDatabase   |     得到库存数据库服务的引用      |
|    GiftDataService.insert(GiftPo po)    |    在数据库中插入GiftPo对象    |
| GoodDataService.search(SearchType type) | 根据SearchType查找多个持久化对象 |

##### supervisebl模块的接口规范

**提供的服务<供接口>**

##### **1. Supervise.overflow**

##### **语法:**public ResultMessage overflow(OverflowData od)

##### **前置条件:**启动一个库存报溢的回合，记录好库存报溢的数据

##### **后置条件:**生产库存报溢单，提交审批

##### **2. Supervise.loss**

##### **语法:**public ResultMessage loss(LossData ld)

##### **前置条件:启动一个库存报损的回合，记录好库存报损的数据**

##### **后置条件:**生成库存报损单，提交审批

##### **3. Supervise.alert**

##### **语法:**public ResultMessage alert(CheckNumRequest cnr)

##### **前置条件:**启动一个库存报警的回合

##### **后置条件:**生成库存报警单，提交审批

**需要的服务<需接口>** 

|                   服务名                   |         服务         |
| :-------------------------------------: | :----------------: |
|   DatabaseFacory.getInventoryDatabase   |    得到库存数据库服务的引用    |
| ReceiptDataService.insert(ReceiptPO po) | 在数据库中插入ReceiptPo对象 |
|    GoodDataService.update(GoodPO po)    |     更新单一持久化对象      |

##### clientbl模块的接口规范

**提供的服务<供接口>**

##### **1. Client.addClient**

##### **语法:**public ResultMessage addClient(ClientVO cvo)

##### **前置条件:**启动一个销售/进货回合，且原表中用户信息不存在

##### **后置条件:**成功添加用户信息

##### **2.Client.deleteClient **

##### **语法:**public ResultMessage deleteClient(int id)

##### **前置条件:**与客户结束交易过程，应收/应付清算完成，且原表中用户信息存在

##### **后置条件:**用户信息成功删除

##### **3.Client.updateClient **

##### **语法:**public ResultMessage updateClient(ClientVO cvo)·1

##### **前置条件:**修改值合法

##### **后置条件:**用户信息修改成功

##### **4.Client.findClient **

##### **语法:**public ClientVO[] updateClient(int id)

##### **前置条件:**用户id存在

##### **后置条件:**返回对应id用户信息

##### importbl模块的接口规范

##### **5.Import.newFrom**

##### **语法:**public ResultMessage newFrom(ImportFormVO ifvo)

##### **前置条件:**用户具有权限

##### **后置条件:**生成新表单

##### **6.Import.findFrom**

##### **语法:**public ImportFormVO[] findFrom(String orderid)

##### **前置条件:**表单信息存在

##### **后置条件**:返回订单信息

##### salebl模块的接口规范

##### **7.Sale.newForm**

##### **语法:**public ResultMessage newFrom(SaleFormVO sfvo)

##### **前置条件:**表单信息存在

##### **后置条件**:返回订单信息

##### **9.Sale.findForm**

##### **语法:**public SaleFormVO[] newFrom(String id)

##### **前置条件:**表单信息存在

##### **后置条件**:返回订单信息

##### **10.Sale.confirm**

##### **语法:**public ResultMessage confirm(String id)

##### **前置条件:**表单存在且未被提交

##### **后置条件**:订单条件设置为待审批

##### **11.Import.confirm**

##### **语法:**public ResultMessage confirm(String id)

##### **前置条件:**表单存在且未被提交

##### **后置条件**:订单条件设置为待审批

##### **12.Sale.cansel**

##### **语法:**public ResultMessage cansel(String id)

##### **前置条件:**表单存在且未被提交

##### **后置条件**:订单条件设置为待审批

##### **13.Import.cansel**

##### **语法:**public ResultMessage confirm(String id)

##### **前置条件:**表单存在且未被提交

##### **后置条件**:删除

**需要的服务<需接口>** 

|            服务名            |         服务         |
| :-----------------------: | :----------------: |
| Database.insertClient(暂定) |     向数据库插入客户信息     |
|   Database.deleteClient   | 从数据库中移除客户相关信息（假移除） |
|   Database.updateClient   |       修改用户信息       |
|    Database.findClient    |       查找用户信息       |
| Database.insertImportForm |       插入进货表单       |
|  Database.insertSaleForm  |       插入销售表单       |
| Database.queryImportForm  |       查询进货单        |
|  Database.querySaleForm   |       查询销售单        |
| Database.updateImportForm |      更新订货单信息       |
|  Database.updateSaleForm  |      更新销售单信息       |

##### 

##### accountbl模块的接口规范

**提供的服务<供接口>**

##### **1. Account.addAccount**

##### **语法:**public ResultMessage addAccount(AccountVO avo)

##### **前置条件:**启动一个新建账户事件

##### **后置条件:**成功添加账户信息

##### **2. Account.delAccount**

##### **语法:**publicb ResultMessage delAccount(String name)

##### **前置条件:**账户name存在

##### **后置条件:**成功删除账户信息

##### **3. Account.findAccount**

##### **语法:**public AccountVO[] findAccount(String name)

##### **前置条件:**查询账户name存在

##### **后置条件:**返回对应name账户信息

##### **4. Account.updateAccount**

##### **语法:**public ResultMessage updateAccount(AccountVO avo)

##### **前置条件:**修改值合法

##### **后置条件:**账户信息修改成功

**需要的服务<需接口>** 

|                   服务名                   |       服务        |
| :-------------------------------------: | :-------------: |
|  AccountDataService.find(String name)   | 根据名称进行查找单一持久化对象 |
| AccountDataService.insert(AccountPo po) |    插入单一持久化对象    |
| AccountDataService.delete(AccountPo po) |    删除单一持久化对象    |
| AccountDataService.update(AccountPo po) |    更新单一持久化对象    |

##### billbl模块的接口规范

##### **提供的服务<供接口>**

##### 1. Bill.newReceipt

##### **语法:**public ResultMessage newReceipt(ReceiptVO rvo)

##### **前置条件:**启动一个生成收款单事件

##### **后置条件:**收款单创建成功

##### **2. Bill.newPayment**

##### **语法:**public ResultMessage newPayment(PaymentVO pvo)

##### **前置条件:**启动一个生成付款单事件

##### **后置条件:**付款单创建成功

##### **3. Bill.newCash**

##### **语法:**public ResultMessage newCash(CashVO cvo)

##### **前置条件:**启动一个生成现金费用单事件

##### **后置条件:**现金费用单创建成功

**4. Bill.changeState**

##### **语法:**public ResultMessage changeState(String id)

##### **前置条件:** 单据Id合法

##### **后置条件:** 将该单据的审批状态改为待审批

**需要的服务<需接口>** 

|                服务名                |    服务     |
| :-------------------------------: | :-------: |
| BillDataService.insert(BillPo po) | 插入单一持久化对象 |
| BillDataService.delete(BillPo po) | 删除单一持久化对象 |
| BillDataService.update(BillPo po) | 更新单一持久化对象 |

##### initialAccountbl的接口规范

**提供的服务<供接口>**

##### **1. InitialAccount.newStage**

##### **语法:**public ResultMessage newStage(InitialAccountVO ivo)

##### **前置条件:** 启动一个期初建账事件

##### **后置条件:** 显示期初建账成功

##### **2. InitialAccount.inquireStage**

##### **语法:**public ResultMessage inquireStage(Datatime datatime)

##### **前置条件:**  时间段合法

##### **后置条件:**  显示该时间段内期初建账信息

**需要的服务<需接口>** 

|                   服务名                    |       服务        |
| :--------------------------------------: | :-------------: |
| InitialAccountDataService.find(String id) | 根据id进行查找单一持久化对象 |
| InitialAccountDataService.insert(InitialAccountPo po) |    插入单一持久化对象    |
| InitialAccountDataService.delete(InitialAccountPo po) |    删除单一持久化对象    |
| InitialAccountDataService.update(InitialAccountPo po) |    更新单一持久化对象    |

**businessProcessbl的接口规范** 

##### **1. BusinessProcess.inquire**

##### **语法:**public ResultMessage inquire(Searchtype type)

##### **前置条件:**查询条件合法

##### **后置条件:**显示符合筛选条件的单据

**2. BusinessProcess.showDetail**

##### **语法:** public FormVo showDetail(String id)

##### **前置条件:**  单据id合法

##### **后置条件:**  显示该单据的详细信息

**3. BusinessProcess.testIdentity**

##### **语法:** public ResultMessage showDetail(Usertype type)

##### **前置条件:**  用户类型合法

##### **后置条件:**  显示该用户是否有权限执行红冲操作

**4. BusinessProcess.copy**

##### **语法:** public FormVo copy(String id)

##### **前置条件:**  单据id合法

##### **后置条件:**  复制该单据提供给用户

**5. BusinessProcess.red**

##### **语法:** public FormVo copy(String id)

##### **前置条件:**  单据id合法

##### **后置条件:**  将该单据的金额数据取负数返回给用户

**需要的服务<需接口>** 

|                  服务名                  |       服务        |
| :-----------------------------------: | :-------------: |
|  SaleDataService.findForm(String id)  | 根据id进行查找单一持久化对象 |
|    BillDataService.find(String id)    | 根据id进行查找单一持久化对象 |
| ImportDataService.findForm(String id) | 根据id进行查找单一持久化对象 |
|                                       |                 |



**TranslationSituationbl的接口规范** 

**1.TranslationSituation.query**

##### **语法:** public ResultMessage query()

##### **前置条件:**  无

##### **后置条件:**  显示交易情况

**2.TranslationSituation.end**

##### **语法:** public ResultMessage end()

##### **前置条件:**  完成经营历程的查询

##### **后置条件:** 无



**需要的服务<需接口>** 

|                   服务名                    |    服务     |
| :--------------------------------------: | :-------: |
|        SaleDataService.findAll()         | 查找所有持久化对象 |
| TranslationSituationDataService.findAll() | 查找所有持久化对象 |
|       ImportDataService.findAll()        | 查找所有持久化对象 |
|                                          |           |



**SaleSituationbl的接口规范**

**1.SaleSituation.List**

##### **语法:** public List<SaleSituation> query(SaleSituationVo saleSituationVo)

##### **前置条件:**  查询条件合法

##### **后置条件:**  显示符合条件的销售明细

**需要的服务<需接口>** 

|                   服务名                    |       服务       |
| :--------------------------------------: | :------------: |
|        SaleDataService.findAll()         |   查找所有持久化对象    |
| SaleSituationDataService.findForList(SaleSituationVo saleSituationVo) | 查找所有符合条件的持久化对象 |
|        BillDataService.findAll()         |   查找所有持久化对象    |
|       ImportDataService.findAll()        |   查找所有持久化对象    |



##### promotionbl模块的接口规范

**提供的服务<供接口>**

**1. Promotion.makePromotion**

##### **语法:**public ResultMessage makePromotion(PromotionVO promotionVo)

##### **前置条件:**启动一个制定促销策略回合

##### **后置条件:**成功制定促销策略，持久化更新涉及的领域对象的数据

**2. Promotion.endPromotion**

##### **语法:** public void endPromotion()

##### **前置条件:** 已经制定了一个销售策略

##### **后置条件:** 结束此次制定促销策略回合

**需要的服务<需接口>** 

|                   服务名                    |    服务     |
| :--------------------------------------: | :-------: |
| PricePromotionDataService.insert(PromotionPO promotionPO) | 插入单一持久化对象 |
| PricePromotionDataService.delete(PromotionPO promotionPO) | 删除单一持久化对象 |
| PricePromotionDataService.update(PromotionPO promotionPO) | 更新单一持久化对象 |
|   PricePromotionDataService.findAll()    | 查找全部持久化对象 |
| CommodityPromotionDataService.insert(PromotionPO promotionPO) | 插入单一持久化对象 |
| CommodityPromotionDataService.delete(PromotionPO promotionPO) | 删除单一持久化对象 |
| CommodityPromotionDataService.update(PromotionPO promotionPO) | 更新单一持久化对象 |
| CommodityPromotionDataService.finaAll()  | 查找全部持久化对象 |
| UserClassPromotionDataService.insert(PromotionPO promotionPO) | 插入单一持久化对象 |
| UserCalssPromotionDataService.delete(PromotionPO promotionPO) | 删除单一持久化对象 |
| UserClassPromotionDataService.update(PromotionPO promotionPO) | 更新单一持久化对象 |
| UserClassPromotionDataService.findAll()  | 查找全部持久化对象 |

approvebl模块的接口规范

**提供的服务<供接口>**

**1. Approve.getApplication**

##### **语法:** public void getApplication()

##### **前置条件:** 启动一个审批单据的回合

##### **后置条件:** 返回所有申请单据

**2. Approve.approveApplication**

##### **语法:** public void approveApplication()

##### **前置条件:** 获取了所有的申请单据

##### **后置条件:** 更新申请单据的状态

**3. Approve.sendMessage**

##### **语法:** public void sendMessage()

##### **前置条件:** 单据审批通过

##### **后置条件:** 给库存管理员发送一条审批通过的消息

**4. Approve.endApplication**

##### **语法:** public void endPromotion()

##### **前置条件:** 已经完成了单据的审批

##### **后置条件:** 结束此次审批单据的回合



**需要的服务<需接口>** 

|                   服务名                    |     服务      |
| :--------------------------------------: | :---------: |
|       ApproveDataService.findAll()       |  查找全部持久化对象  |
| ApproveDataService.update(ApplicationPo applicationPo) |  更新单一持久化对象  |
| ApproveMessageDataService.insert(String message) | 在数据库中插入一条消息 |
|  ApproveMessageDataServicefind(int id)   |  查找最新的一条消息  |
|    ApproveMessageDataService.count()     | 统计一共有多少条消息  |

##### userbl模块的接口规范

**提供的服务<供接口>**

##### **1. User.login**

##### **语法:**public ResultMessage login(long id, String password)

##### **前置条件:** password符合输入规则

##### **后置条件:** 查找是否存在相应的User,根据输入的password返回登陆验证的结果

##### **2. User.new**

##### **语法:**public UserVo new(long id, String password, int level,Usertype type)

##### **前置条件:** id符合规范，password符合输入规则，level符合输入范围,type符合输入规范

##### **后置条件:** 创建一个用户名为id密码为password等级为level类型为type的新用户

##### **3. User.delete**

##### **语法:**public ResultMessage delete(long id)

##### **前置条件:** 存在此id的用户

##### **后置条件:** 将此用户标记为“已移除”

**需要的服务<需接口>** 

|                服务名                |       服务        |
| :-------------------------------: | :-------------: |
|  UserDataService.find(String id)  | 根据id进行查找单一持久化对象 |
| UserDataService.insert(UserPo po) |    插入单一持久化对象    |
| UserDataService.delete(UserPo po) |    删除单一持久化对象    |
| UserDataService.update(UserPo po) |    更新单一持久化对象    |

### 5.4 数据层的分解

（此处照着把书上的图画了命名为“XXX数据层模块的描述”保存成png格式存在SEhomework\doc\img下即可）

#### 5.4.1 数据层模块的职责

##### 商品分类管理模块的职责

|                   模块                    |                    职责                    |
| :-------------------------------------: | :--------------------------------------: |
|           CategoryDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
|    CategoryDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |
| CategoryDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      CategoryDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

##### 商品数据层模块的职责

|                 模块                  |                    职责                    |
| :---------------------------------: | :--------------------------------------: |
|           GoodDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
|    GoodDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |
| GoodDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      GoodDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

**查看库存数据层模块的职责** 

|                 模块                  |                    职责                    |
| :---------------------------------: | :--------------------------------------: |
|           ViewDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
|    ViewDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |
| ViewDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      ViewDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

##### 赠品数据层模块的职责

|                 模块                  |                    职责                    |
| :---------------------------------: | :--------------------------------------: |
|           GiftDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
|    GiftDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |
| GiftDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      GiftDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

**库存监管数据层模块的职责**

|                   模块                   |                    职责                    |
| :------------------------------------: | :--------------------------------------: |
|           ReceiptDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
|    ReceiptDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |
| ReceiptDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      ReceiptDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

##### 客户数据层模块的职责

|                  模块                   |                    职责                    |
| :-----------------------------------: | :--------------------------------------: |
|           ClientDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
| ClientDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      ClientDataServiceMysqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

##### 进货数据层模块的职责

|                  模块                   |                    职责                    |
| :-----------------------------------: | :--------------------------------------: |
|           ImportDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
| ImportDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|       IportDataServiceMysqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

##### 销售数据层模块的职责

|                 模块                  |                    职责                    |
| :---------------------------------: | :--------------------------------------: |
|           SaleDataService           |     持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务      |
| SaleDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务  |
|      SaleDataServiceMysqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体载入、集体保存、增、删、改、查服务 |

![账户管理数据层模块的描述](..\img\账户管理数据层模块的描述.png)

##### 账户管理数据层模块的职责

|                   模块                   |                    职责                    |
| :------------------------------------: | :--------------------------------------: |
|           AccountDataService           |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|    AccountDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| AccountDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|      AccountDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

![财务管理数据层模块的描述](..\img\财务管理数据层模块的描述.png)

##### 财务管理数据层模块的职责

|               模块                |                    职责                    |
| :-----------------------------: | :--------------------------------------: |
|         BillDataService         |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|    BillServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| BillServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|      BillServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

![期初建账数据层模块的描述](..\img\期初建账数据层模块的描述.png)

##### 期初建账数据层模块的职责

|                    模块                    |                    职责                    |
| :--------------------------------------: | :--------------------------------------: |
|        InitialAccountDataService         |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|  InitialAccountDataServiceExcelFileImpl  | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| InitialAccountDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|    InitialAccountDataServiceMySqlImpl    | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

![商品总价数据层模块的描述](..\img\经营情况查询数据层模块的.png)

##### 经营情况查询数据层模块的职责

|                    模块                    |                 职责                  |
| :--------------------------------------: | :---------------------------------: |
|     TranslationSituationDataService      |      持久化数据库的接口，提供集体的载入、集体查询服务       |
| TranslationSituationDataServiceExcelFileImpl | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体查询服务  |
| TranslationSituationDataServiceSerializableFileImpl |  基于序列化文件的持久化数据库的接口，提供集体的载入、集体查询服务   |
| TranslationSituationDataServiceMySqlImpl | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体查询服务 |

![商品总价数据层模块的描述](..\img\销售明细查询数据层模块的描述.png)

##### 销售明细查询数据层模块的职责

|                    模块                    |                 职责                  |
| :--------------------------------------: | :---------------------------------: |
|         SaleSituationDataService         |      持久化数据库的接口，提供集体的载入、集体查询服务       |
| SaleSituationDataServiceServiceExcelFileImpl | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体查询服务  |
| SaleSituationDataServiceSerializableFileImpl |  基于序列化文件的持久化数据库的接口，提供集体的载入、集体查询服务   |
|    SaleSituationDataServiceMySqlImpl     | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体查询服务 |

![商品总价数据层模块的描述](..\img\用户等级策略数据层模块的描述.png)

![商品总价数据层模块的描述](..\img\组合商品数据层模块的描述.png)

 ![商品总价数据层模块的描述](..\img\商品总价数据层模块的描述.png)

##### 销售策略数据层模块的职责

|                    模块                    |                    职责                    |
| :--------------------------------------: | :--------------------------------------: |
|        PricePromotionDataService         |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|  PricePromotionDataServiceExcelFileImpl  | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| PricePromotionDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|    PricePromotionDataServiceMySqlImpl    | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|      CommodityPromotionDataService       |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
| CommodityPromotionDataServiceExcelFileImpl | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| CommodityPromotionDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|  CommodityPromotionDataServiceMySqlImpl  | 基于MySql数据库的久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|      UserClassPromotionDataService       |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
| UserClassPromotionDataServiceExcelFileImpl | 基于Excel文件持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| UserClassPromotionDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|  UserClassPromotionDataServiceMySqlImpl  | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

![审批数据层模块的描述](..\img\审批数据层模块的描述.png)

##### 审批数据层模块的职责

|                    模块                    |                    职责                    |
| :--------------------------------------: | :--------------------------------------: |
|            ApproveDataService            |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|     ApproveDataServiceExcelFileImpl      | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|  ApproveDataServiceSerializableFileImpl  | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|       ApproveDataServiceMySqlImpl        | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|        ApproveMessageDataService         |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|  ApproveMessageDataServiceExcelFileImpl  | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| ApproveMessageDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|    ApproveMessageDataServiceMySqlImpl    | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

![系统管理数据层模块的描述](..\img\系统管理数据层模块的描述.png)

##### 系统管理数据层模块的职责

|                 模块                  |                    职责                    |
| :---------------------------------: | :--------------------------------------: |
|           UserDataService           |     持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务     |
|    UserDataServiceExcelFileImpl     | 基于Excel文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
| UserDataServiceSerializableFileImpl | 基于序列化文件的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |
|      UserDataServiceMySqlImpl       | 基于MySql数据库的持久化数据库的接口，提供集体的载入、集体保存、增、删、改、查服务 |

#### 5.4.2 数据层模块的接口规范

##### 商品分类管理数据层模块的接口规范
**提供的服务<供接口>**

##### CategoryDataService.insert

##### **语法:**public boolean insert(CategoryPO po) throws RemoteException;

##### **前置条件:**同样ID的po在CategoryPO中不存在 

##### **后置条件:**在数据库中添加一个po记录 

##### CategoryDataService.delete

##### **语法:**public boolean delete(CategoryPO po) throws RemoteException;

##### **前置条件:**在CategoryPO中存在要删除的po 

##### **后置条件:**在数据库中删除一个po记录 

##### CategoryDataService.update

##### **语法:**public boolean update(CategoryPO po) throws RemoteException;

##### **前置条件:存在修改过信息的po** 

##### **后置条件:**在数据库中更新po记录 

##### CategoryDataService.list

##### **语法:**public CategoryPO list() throws RemoteException;

##### **前置条件:**数据库中存在po记录 

##### **后置条件:**返回所有po记录的列表 



**商品管理数据层模块的接口规范**

##### GoodDataService.insert

##### **语法:**public boolean insert(GoodPO po) throws RemoteException;

##### **前置条件:**同样ID的po在GoodPO中不存在 

##### **后置条件:**在数据库中添加一个po记录 

##### GoodDataService.delete

##### **语法:**public boolean delete(GoodPO po) throws RemoteException;

##### **前置条件:**存在要删除的po记录 

##### **后置条件:在数据库中删除一个po记录** 

##### GoodDataService.update

##### **语法:**public boolean update(GoodPO po) throws RemoteException;

##### **前置条件:** 

##### **后置条件:**更新数据库中的po记录 



**库存查看数据层模块的接口规范**

##### ViewDataService.update

##### **语法:**public boolean update(ViewPO po) throws RemoteException;

##### **前置条件:**存在修改过信息的po 

##### **后置条件:**更新数据库中的po记录 



**库存赠送数据层模块的接口规范** 

##### GiftDataService.update

##### **语法:**public boolean update(GiftPO po) throws RemoteException;

##### **前置条件:存在修改过信息的po** 

##### **后置条件:**更新数据库中的po记录 



**库存监管数据层模块的接口规范** 

##### SuperviseDataService.update

##### **语法:**public boolean update(SupervisePO po) throws RemoteException;

##### **前置条件:存在修改过信息的po** 

##### **后置条件:**更新数据库中的po记录 



##### 销售数据层模块的接口规范

##### 提供的服务<供接口>

##### SaleDataService.newForm

##### **语法:**public boolean newForm(SaleFormPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在SaleForm中不存在

##### **后置条件:** 在数据库中添加一个po记录

##### SaleDataService.findForm

##### **语法:**public SaleFormPO findForm(SaleFormPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在SaleForm中存在

##### **后置条件:** 返回查询结果



##### 进货单管理数据层模块的接口规范

**提供的服务<供接口>**

##### ImportDataService.findForm

##### **语法:**public ImportFormPO newForm(SaleFormPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在ImportForm中存在

##### **后置条件:** 返回查询结果

##### ImportDataService.newForm

##### **语法:**public boolean newForm(ImportFormPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在ImportForm中不存在

##### **后置条件:** 在数据库中添加一个po记录



##### 客户管理数据层模块的接口规范

**提供的服务<供接口>**

##### ClientDataService.newClient

##### **语法:**public boolean newClient(ClientPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在Client中不存在

##### **后置条件:** 在数据库中添加一个po记录



##### 客户管理数据层模块的接口规范

##### ClientDataService.deleteClient

##### **语法:**public boolean newClient(ClientPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样Client的po

##### **后置条件:** 在数据库中删除一个po记录

##### ClientDataService.findClient

##### **语法:**public ClientPO findClient(ClientPO) throws RemoteException;

##### **前置条件:** 数据库中存在po

##### **后置条件:** 返回查询结果

##### ClientDataService.updateClient

##### **语法:**public boolean updateClient(ClientPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中修改一个po记录

##### 

**账户管理数据层模块的接口规范**

**提供的服务<供接口>**

##### **AccountDataService.insert**

##### **语法:**public void insert(AccountPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在Mapper中不存在

##### **后置条件:** 在数据库中添加一个po记录

##### **AccountDataService.delete**

##### **语法:**public void delete(AccountPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中删除一个po记录

##### **AccountDataService.update**

##### **语法:**public void update(AccountPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中更新一个po记录

##### **AccountDataService.find**

##### **语法:**public AccountPO find(String name) throws RemoteException;

##### **前置条件:** 数据库中存在同样名称的po

##### **后置条件:** 查找返回一个po记录

##### **AccountDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 初始化持久化数据库

##### **AccountDataService.finish**

##### 语法: public void finish() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 结束初始化持久化数据库的使用



##### 财务管理数据层模块的接口规范

**提供的服务<供接口>**

##### **BillDataService.insert**

##### **语法:**public void insert(BillPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在Mapper中不存在

##### **后置条件:** 在数据库中添加一个po记录

##### **BillDataService.delete**

##### **语法:**public void delete(BillPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中删除一个po记录

##### **BillDataService.update**

##### **语法:**public void update(BillPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中更新一个po记录

##### **BillDataService.find**

##### **语法:**public BillPO find(String id) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 查找返回一个po记录

##### **BillDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 初始化持久化数据库

##### **BillDataService.finish**

##### 语法: public void finish() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 结束初始化持久化数据库的使用



##### 期初建账数据层模块的接口规范

**提供的服务<供接口>**

##### **InitialAccountDataService.insert**

##### **语法:**public void insert(InitialAccountPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在Mapper中不存在

##### **后置条件:** 在数据库中添加一个po记录

##### **InitialAccountDataService.delete**

##### **语法:**public void delete(InitialAccountPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中删除一个po记录

##### **InitialAccountDataService.update**

##### **语法:**public void update(InitialAccountPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中更新一个po记录

##### **InitialAccountDataService.find**

##### **语法:**public InitialAccountPO find(String id) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 查找返回一个po记录

##### **InitialAccountDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 初始化持久化数据库

##### **InitialAccountDataService.finish**

##### 语法: public void finish() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 结束初始化持久化数据库的使用



**经营情况查询数据层模块的接口规范**

**提供的服务<供接口>**

**TranslationSituationDataService.findAll**

**语法:public TranslationSituationDataService.findAll()**

##### **前置条件:**无

##### **后置条件:**查找返回所有的经营情况

##### **TranslationSituationDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **TranslationSituationPromotionDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用



**销售明细查询数据层模块的接口规范**

**提供的服务<供接口>**

**SaleSituationDataService.findForList**

**语法：public SaleSituationDataService.findForList(SaleSituationPo saleSituationPo)**

##### **前置条件:** 数据库中存在符合条件的销售明细

##### **后置条件:** 查询一段时间里的单据

##### **SaleSituationDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **SaleSituationPromotionDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用



##### 销售策略数据层模块的接口规范

**提供的服务<供接口>**

##### **UserClassPromotionDataService.insert**

##### **语法:**public void insert(PromotionPO po)

##### **前置条件:**同一时间段内没有促销策略

##### **后置条件:**在数据库中添加一个po记录

##### **UserClassPromotionDataService.delete**

##### **语法:**public void delete(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中删除一个po记录

##### **UserClassPromotionDataService.update**

##### **语法:**public void update(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中更新一个po记录

##### **UserClassPromotionDataService.findAll**

##### **语法:**public List<PromotionPO> findAll()

##### **前置条件:**无

##### **后置条件:**查找返回所有的促销策略

##### **UserClassPromotionDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **UserClassPromotionDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用

##### **CommodityPromotionDataService.insert**

##### **语法:**public void insert(PromotionPO po)

##### **前置条件:**同一时间段内没有促销策略

##### **后置条件:**在数据库中添加一个po记录

##### **CommodityPromotionDataService.delete**

##### **语法:**public void delete(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中删除一个po记录

##### **CommodityPromotionDataService.update**

##### **语法:**public void update(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中更新一个po记录

##### **CommodityPromotionDataService.findAll**

##### **语法:**public List<PromotionPO> findAll()

##### **前置条件:**无

##### **后置条件:**查找返回所有的促销策略

##### **CommodityPromotionDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **CommodityPromotionDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用

##### **PricePromotionDataService.insert**

##### **语法:**public void insert(PromotionPO po)

##### **前置条件:**同一时间段内没有促销策略

##### **后置条件:**在数据库中添加一个po记录

##### **PricePromotionDataService.delete**

##### **语法:**public void delete(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中删除一个po记录

##### **PricePromotionDataService.update**

##### **语法:**public void update(PromotionPO po)

##### **前置条件:**数据库在指定时间内存在促销策略

##### **后置条件:**在数据库中更新一个po记录

##### **PricePromotionDataService.findAll**

##### **语法:**public List<PromotionPO> findAll()

##### **前置条件:**无

##### **后置条件:**查找返回所有的促销策略

##### **PricePromotionDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **PricePromotionDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用



##### 审批数据层模块的接口规范

**提供的服务<供接口>**

##### **ApproveDataService.update**

##### **语法:**public void update(ApplicationPO po)

##### **前置条件:**数据库中存在待审批单据

##### **后置条件:**在数据库中更新一个po记录

##### **ApproveDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **ApproveDataServicefinish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用

##### **ApproveMessageDataService.insert**

##### **语法:**public void insert(String message)

##### **前置条件:**单据审批通过

##### **后置条件:**给库存人发送一条消息

##### **ApproveMessageDataService.count**

##### **语法:**public int update()

##### **前置条件:**无

##### **后置条件:**返回数据库中消息的数量

##### **PricePromotion.find**

##### **语法:**public String find(int id)

##### **前置条件:**无

##### **后置条件:**按ID进行查找返回相应的消息结果

##### **ApproveDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:**无

##### **后置条件:**初始化持久化数据库

##### **ApproveDataService.finish**

##### **语法:**public void finish() throws RemoteException

##### **前置条件:**无

##### **后置条件:**结束初始化持久化数据库的使用



##### 系统管理数据层模块的接口规范

**提供的服务<供接口>**

##### **UserDataService.insert**

##### **语法:**public void insert(UserPO po) throws RemoteException;

##### **前置条件:** 同样ID的po在Mapper中不存在

##### **后置条件:** 在数据库中添加一个po记录

##### **UserDataService.delete**

##### **语法:**public void delete(UserPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中删除一个po记录

##### **UserDataService.update**

##### **语法:**public void update(UserPO po) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 在数据库中更新一个po记录

##### **UserDataService.find**

##### **语法:**public UserPO find(long id) throws RemoteException;

##### **前置条件:** 数据库中存在同样ID的po

##### **后置条件:** 查找返回一个po记录

##### **UserDataService.init**

##### **语法:**public void init() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 初始化持久化数据库

##### **UserDataService.finish**

##### 语法: public void finish() throws RemoteException

##### **前置条件:** 无

##### **后置条件:** 结束初始化持久化数据库的使用



## 6 信息视角

### 6.1 数据持久化对象

- CategoryPo类是包含商品分类的编号属性
- GoodPO类是包含商品的编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价属性。
- ViewPo类是保存一段时间内库存情况的数据的类，包含出库数量及金额，入库数量及金额，销售数量及金额，进货数量及金额，并且包括库存数量的合计。
- ViewTodayPo类是保存当天内库存情况的数据的类，包含当天各种商品的名称、型号、库存数量、库存均价、批次、批号、出场日期
- GiftPo类是保存赠品的数据的类，包含编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价属性。
- ReceiptPo类是保存库存库存报溢、报损、报警数据的类，包含包含编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价属性。
- CategoryPo类是包含商品分类的编号属性

持久化用户对象CategoryPO的定义如下：

```java
public class CategoryPO implements Serializable {
  int id;
  String name;
  
  public CategoryPo(String name){
    this.name = name;
  }
  public String getName(){
    return name;
  }
  public String getId(){
    return id;
  }
}
```

持久化用户对象GoodPO的定义如下：

```java
public class GoodPO implements Serializable {
  int id;
  String name;
  String type;
  int num;
  int pur_price;
  int ret_price;
  int rece_price;
  int rece_ret_price;
  
  public GoodPo(String name, String type, int num, int pur_price, int ret_price, int rece_price, int rece_ret_price){
    this.name = name;
    this.type = type;
    this.num = num;
    this.pur_price = pur_price;
    this.ret_price = rece_price;
    this.rece_ret_price = rece_ret_price;
  }
  public String getName(){
    reutrn name;
  }
  public String getType(){
    return type;
  }
  public int getNum(){
    return num;
  }
  public int getPur_price(){
    return pur_price;
  }
  public int getRet_price(){
    return ret_price;
  }
  public int getRece_ret_price(){
    return rece_ret_price;
  }
}
```

持久化用户对象ViewPO的定义如下：

包含出库数量及金额，入库数量及金额，销售数量及金额，进货数量及金额，并且包括库存数量的合计

```java
public class ViewPO implements Serializable {
  int out_num;
  int out_price;
  int in_num;
  int in_price;
  int sale_num;
  int sale_price;
  
  public list get_Period_Message(Period period){
    /*period_message()的返回值是包含了该时间段内的出库数量及金额，入库数量及金额，销售数量及金额，进货数量及金额，库存数量的合的列表*/
      return period_message();
  }
  
  public list get_Today_Message(){
    /*today_message()的返回值是包含了当天各种商品的名称、型号、库存数量、库存均价、批次、批号、出场日期的列表*/
      return today_message();
  }
}
```

持久化用户对象ViewPO的定义如下：

```java
public class ViewPO implements Serializable extends GoodPO {
 
  public list get_Period_Message(Period period){
    /*period_message()的返回值是包含了该时间段内的出库数量及金额，入库数量及金额，销售数量及金额，进货数量及金额，库存数量的合的列表*/
      return period_message();
  }
  
  public list get_Today_Message(){
    /*today_message()的返回值是包含了当天各种商品的名称、型号、库存数量、库存均价、批次、批号、出场日期的列表*/
      return today_message();
  }
}
```

持久化用户对象GiftPO的定义如下：

```java
public class GiftPO implements Serializable extends GoodPo {
  //把赠品信息发送给总经理
  public void sendToManager(){
    sendMessage();
  }
  //接受总经理的回复
  public String receiveFromManager(){
    return receiveMessage();
  }
}
```

持久化用户对象SupervisePO的定义如下：

```java
public class SupervisePO implements Serializable {
  int id;
  String name;
  int num;
  
  public SupervisePO(int id, String name, int num){
    this.id = id;
    this.name = name;
    this.num = num;
  }
  public String getName(){
    return name;
  }
  public int getId(){
    return id;
  }
  public int getNum(){
    return num;
  }
  sendMessage();
  receiveMessage();
}
```



- AccountPO类包含账户的名称、余额属性
- 持久化用户对象AccountPO的定义如下：

~~~java
public class AccountPO implements Serializable {
  	String name;
	double balance;
 
  	public AccountPO(String name){
        this.name = name;
      	this.balance = getBalance(this.name);
    }
  
  	public String getname(){
        return name;
    }
  	
      public String getBalance(){
        return balance;
    }
  
}
~~~

- BillPO类包含财务类数据的单据编号、操作员、清单、总额属性
- 持久化用户对象BillPO的定义如下：

~~~java
public class BillPO implements Serializable {
  	String id;
	String operator;
  	BillList list;
  	double total;
 
  	public BillPO(String id, String operator, BillList list, double total){
        this.id = id;
      	this.operator = operator();
        this.list = list
      	this.total = total;
    }
  
  	public double getTotal(){
        return total;
    }
  	
    public String getId(){
        return id;
    }
  
  	public String getOperator(){
        return operator;
    }  	
  
}
~~~

- InitialAccountPo类包含期初建账数据的商品信息、最近进价和最近售价、客户信息、银行账户信息
- 持久化用户对象InitialAccountPo的定义如下：

~~~java
public class InitialAccountPO implements Serializable {
  	Commodity commodity;
	double importPrice;
  	double exportPrice;
  	Customer customer;
  	Account account;
  
  	public InitialAccountPO(Commodity commodity, double importPrice, double exportPrice, Customer customer, Account account){
        this.commodity = commodity;
      	this.importPrice = importPrice;
        this.exportPrice = exportPrice;
      	this.customer = customer;
      	this.account = account;
    }
  
  	public Commodity getCommodity(){
        return commodity;
    }
  	
    public double getImportPrice(){
        return importPrice;
    }
  	
  	public double getExportPrice(){
        return exportPrice;
    }
  
  	public Customer getCustomer(){
        return customer;
    }  	
  
 	public Customer getAccount(){
        return account;
    } 
  
  
}
~~~

- SaleSituationPO类包含时间区间，单据类型，客户，业务员，仓库

```java
public class SaleSituationPO implements Serializable {
  	Date bengin;
  	Date end;
    String Type;
  	Customer customer;
  	User user;
    int wareHouse;
  
  	public SaleSituationPO(){
        super();
    }
  	
  	public SaleSituationPO(Date bengin, Date end,  String Type, Customer customer,User user,int wareHouse){
        bengin = this.begin;
  		end = this.end; 
    	Type = this.Type;
  		customer = this.customer;
  		user = this.user;
    	wareHouse = this.wareHouse;
    }
  
  	public Date getBegin(){
        return bengin;
    }
  
  	public void setBegin(Date begin){
      	bengin = this.begin;
	}
  
	public Date getEnd(){
        return end;
    }
  	
  	public Date setEnd(Date end){
    	end = this.end; 
    }
  	
    public String Type(){
        return Type;
    }
  
  	public void setType(String Type){
        Type = this.Type;
    }
  
  	public Customer getCustomer(){
        return customer;
    }
  
  	public void setCustomer(Customer customer){
        customer = this.customer;
    }
  
  	public User getUser(){
        return user;
    }
  
  	public void setUser(User user){
        user = this.user;
    }
  
 	public int getWareHouse(){
        return wareHouse;
    } 
    
    public void setWareHouse(){
        wareHouse = this.wareHouse;
    }
  
  
}
```

- SaleSituationResultPO类包含时间、商品名、型号、数量、单价、总额

```java
public class SaleSituationPO implements Serializable {
  	Date time;
    String producename;
    String type;
  	int count;
  	double price;
    double amount;
  
  	public SaleSituationPO(){
        super();
    }
  	
  	public SaleSituationPO(Date time, String producename, String type, int count, double price, double amount){
        time = this.time;
  		producename = this.producename; 
    	type = this.type;
        count = this.count;
  		price = this.price;
    	amount = this.amount;
    }
  
  	public Date getTime(){
        return time;
    }
  
  	public void setTime(Date time){
      	time = this.time;
	}
  	
    public String getProduceName(){
        return produceName;
    }
  
  	public void setProduceName(){
        producename = this.producename; 
    }
  	
  	public String getType(){
        return Type;
    }
  
  	public void setType(String Type){
        type = this.type;
    }
  	
  	public int getCount(){
        return count;
    }
  
  	public void setCount(int count){
        count = this.count;
    }
  
  	public double getPrice(){
        return price;
    }
  
  	public void setPrice(double price){
        price = this.price;
    }
  
  	public double getAmount(){
        return amount;
    }
  
  	public void setAmount(){
        amount = this.amount;
    }
  
}
```



- PromotionPO类包含促销起始日、促销结束日、礼品编号、赠品名称，礼品数量、价格折让、代金劵

```java
public class PromotionPO implements Serializable {
  	
  	int giftId;
    String giftName;
  	int giftcount;
  	double discount;
  	double cash;
  	List<Integer> commodityId;
  	
  	Date begin;
  	Date end;
  
  
  	public PromotionPO(){
      	super();
    }
  
  	public void setGiftId(int giftId){
        this.giftId = giftId;
    }
  
  	public int getGiftId(){
        return giftId;
    }
  
  	public void setGiftName(String giftName){
        this.giftName = giftName;
    }
  
  	public String getGiftName(){
        return giftName;
    }
  	
  	public void setGiftcount(int giftcount){
        this.giftcount = giftcount;
    }
  
  	public String getGiftcount(){
        return giftcount;
    }
  
  	public void setDiscount(int discount){
        this.discount = discount;
    }
  
  	public String getDiscount(){
        return discount;
    }
  
  	public void setCash(int Cash){
        this.cash = cash;
    }
  
  	public String getCash(){
        return cash;
    }
  
  	public void setCommodityId(int ...commodityId){
       	for(int i = 0; i < commodity.size(); i++){
            commodityId.add(commityId[i]);
        }
    }
  
  	public List<Integer> getCommodityId(){
        return commodityId;
    }
  
  	public void setBegin(Date begin){
        this.begin = begin;
    }
  
  	public Date getBegin(){
        return begin;
    }
  
    public void setEnd(Date end){
        this.end = end;
    }
  
  	public Date end(){
        return end;
    }
}
```

- Message类包含用户的用户名、密码属性、用户类型

```java
public class Message implements Serializable {
  	
  	int messageId;
  	String message;
  	
  	public UserPO(int messageId,String message){
        this.messageId = messageId;
      	this.password = message;
    }
  
  	public int getMessageId(){
        return username;
    }
  	
  	public String getMessage(){
        return password;
    }
}
```

- 持久化用户对象UserPO的定义如下：

```java
public class UserPO implements Serializable {
  	String username;
	String password;
  	int type;
  
  	public UserPO(String username,String password, int type){
        this.username = username;
      	this.password = password;
      	this.type = type;
    }
  
  	public String getUsername(){
        return username;
    }
  	
  	public String getPassword(){
        return password;
    }
  
  	public int getType(){
        return type;
    }
}
```



- UserPO类包含用户的用户名、密码、用户级别、用户类型
- 持久化用户对象UserPO的定义如下：

~~~JAVA
 public class UserPO implements Serializable {
   	String username;
 	String password;
   	int level;
   	Usertype type;

   	public UserPO(String username,String password, int level, Usertype type){
         this.username = username;
       	this.password = password;
      	this.level = level;
       	this.type = type;
     }

   	public String getUsername(){
         return username;
     }

   	public String getPassword(){
         return password;
     }

    public int getLevel(){
        return level;
    }
   	public Usertype getType(){
         return type;
     }
 }
~~~
### 6.2 Txt 持久化格式

根据自己部分的需要照书上的例子填写

**Category.xlsx** 

每行分别对应商品的编号、名称。如下所示：

| 编号            | 名称   |
| ------------- | ---- |
| 1234567890123 | 饮品   |

**Good.xlsx** 

每行分别对应商品的编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。如下所示：

| 编号            | 名称   | 型号    | 库存数量 | 进价   | 零售价  | 最近进价 | 最近零售价 |
| ------------- | ---- | ----- | ---- | ---- | ---- | ---- | ----- |
| 1234567891234 | 牙膏   | TX183 | 3000 | 25   | 30   | 25   | 33    |

**View.xlsx** 

每行分别对应时间段内的出库数量及金额，入库数量及金额，销售数量及金额，进货数量及金额，库存数量的合计

|     商品编号      | 商品名称 | 出库数量 | 出库金额 | 入库数量 | 入库金额 | 销售数量 | 销售金额 | 进货数量 | 进货金额 | 库存数量合计 |
| :-----------: | ---- | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :----: |
| 1234567891234 | 牙膏   | 200  | 600  | 500  | 1000 | 100  | 300  | 500  | 550  |  3000  |

每行分别对应当天各种商品的名称、型号、库存数量、库存均价、批次、批号、出场日期

| 商品名称 |  型号   | 库存数量 | 库存均价 |  批次  |  批号   |    出厂日期    |
| :--: | :---: | :--: | :--: | :--: | :---: | :--------: |
|  牙膏  | TX183 | 3000 | 1.5  | 115  | XD142 | 2015-02-11 |

**Receipt.xlsx**

每行分别对应商品的编号、名称、库存数量。如下所示：

| 编号            | 名称   | 库存数量 |
| ------------- | ---- | ---- |
| 1234567891235 | 牙刷   | 500  |

<<<<<<< HEAD
促销起始日、促销结束日、礼品编号、礼品数量、价格折让、代金劵

**UserClassPromtion.xlsx**

| 赠品编号  | 赠品名称 | 赠品数量数量 | 价格折让 | 代金劵  | 促销起始日     | 促销结束日      | 用户等级 |
| ----- | ---- | ------ | ---- | ---- | --------- | ---------- | ---- |
| 12345 | 牙膏   | 5      | 5%   | 25   | 2017-9-30 | 2017-10-30 | 1    |

**CommodityPromotion.xlsx**

| 商品1编号 | 商品1名称 | 商品2编号 | 商品2名称 | 降价   | 促销起始日     | 促销结束日      |
| ----- | ----- | ----- | ----- | ---- | --------- | ---------- |
| 12345 | 牙膏    | 1234  | 牙刷    | 5    | 2017-9-30 | 2017-10-30 |

**PricePromotion.xlsx**

| 赠品编号  | 赠品名称 | 赠品数量数量 | 代金劵  | 促销起始日     | 促销结束日      | 商品总价 |
| ----- | ---- | ------ | ---- | --------- | ---------- | ---- |
| 12345 | 牙膏   | 5      | 25   | 2017-9-30 | 2017-10-30 | 500  |

**Account.xlsx**

每行分别对应账户的名称、余额。如下所示：

| 名称         | 余额         |
| ---------- | ---------- |
| 建设银行（0598） | 11,000,000 |

**Bill.xlsx**

每行分别对应单据编号、操作员、清单、总额。如下所示：

| 单据编号                 | 操作员   | 清单   | 总额      |
| -------------------- | ----- | ---- | ------- |
| SKD-20171022-00001   | 01001 | 转账清单 | 100,000 |
| FKD-20171022-00001   | 01001 | 转账清单 | 100,000 |
| XJFYD-20171022-00001 | 01001 | 条目清单 | 100,000 |

**InitialAccount.xlsx**

每行分别对应期初建账数据的商品信息、最近进价和最近售价、客户信息、银行账户信息。如下所示：

| 期名                | 商品信息 | 最近进价 | 最近售价 | 客户信息 | 银行账户信息 |
| ----------------- | ---- | ---- | ---- | ---- | ------ |
| 20161230-20171230 |      |      |      |      |        |

**User.xlsx**

每行分别对应用户的用户名、密码、用户级别、用户类型。如下所示：

| 用户名   | 密码     | 用户级别 | 用户类型 |
| ----- | ------ | ---- | ---- |
| 00001 | 666666 | 1    | 总经理  |

### 6.3 数据库表

数据库中包括Category表、Good表、Gift表、Receipt表、Account表、Bill表、InitialAccount表、User表、Message表、UserClassPromtion表、CommodityPromotion表、PricePromotion表
>>>>>>> 1ee46c4791840bf6c51ea25d52551bc02b99fdc0
